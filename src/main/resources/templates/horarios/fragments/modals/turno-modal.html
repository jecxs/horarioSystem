<div th:fragment="modal" class="modal fade" id="modalTurno" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Gestionar Turnos</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="turnoTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="lista-turnos-tab" data-bs-toggle="tab" data-bs-target="#lista-turnos" type="button" role="tab">Lista</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="nuevo-turno-tab" data-bs-toggle="tab" data-bs-target="#nuevo-turno" type="button" role="tab">Nuevo</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="generar-bloques-tab" data-bs-toggle="tab" data-bs-target="#generar-bloques" type="button" role="tab">Generar Bloques</button>
                    </li>
                </ul>
                <div class="tab-content" id="turnoTabContent">
                    <div class="tab-pane fade show active p-3" id="lista-turnos" role="tabpanel">
                        <div class="table-responsive">
                            <table class="table table-striped" id="tablaTurnos">
                                <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Horario</th>
                                    <th>Bloques</th>
                                    <th>Acciones</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- Se llenará con JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade p-3" id="nuevo-turno" role="tabpanel">
                        <form id="formTurno" class="row g-3">
                            <div class="col-md-12">
                                <label for="turnoNombre" class="form-label">Nombre del Turno</label>
                                <input type="text" class="form-control" id="turnoNombre" required placeholder="Ej: 1M (Primer turno mañana)">
                            </div>
                            <div class="col-md-6">
                                <label for="turnoHoraInicio" class="form-label">Hora de Inicio</label>
                                <input type="time" class="form-control" id="turnoHoraInicio" required>
                            </div>
                            <div class="col-md-6">
                                <label for="turnoHoraFin" class="form-label">Hora de Fin</label>
                                <input type="time" class="form-control" id="turnoHoraFin" required>
                            </div>
                            <div class="col-md-12">
                                <div class="alert alert-info" role="alert">
                                    <i class="bi bi-info-circle-fill me-2"></i>
                                    Después de crear un turno, puede generar bloques de horario (horas pedagógicas) para este turno en la pestaña "Generar Bloques".
                                </div>
                            </div>
                            <div class="col-md-12 text-end">
                                <button type="button" class="btn btn-primary" id="btnGuardarTurno">Guardar Turno</button>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane fade p-3" id="generar-bloques" role="tabpanel">
                        <form id="formGenerarBloques" class="row g-3">
                            <div class="col-md-6">
                                <label for="bloquesTurno" class="form-label">Turno</label>
                                <select class="form-select" id="bloquesTurno" required>
                                    <option value="">Seleccione...</option>
                                    <!-- Se llenará con JavaScript -->
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="bloquesDuracion" class="form-label">Duración de Bloque (minutos)</label>
                                <input type="number" class="form-control" id="bloquesDuracion" min="30" max="120" value="45" required>
                                <small class="form-text text-muted">Duración de cada hora pedagógica en minutos.</small>
                            </div>
                            <div class="col-md-12">
                                <div class="alert alert-warning" role="alert">
                                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                    <strong>¡Atención!</strong> Generar bloques eliminará los bloques existentes para este turno. Solo es posible si los bloques no tienen asignaciones.
                                </div>
                            </div>
                            <div class="col-md-12 text-end">
                                <button type="button" class="btn btn-primary" id="btnGenerarBloques">Generar Bloques</button>
                            </div>
                        </form>
                        <div class="mt-3">
                            <h6>Vista previa de bloques para el turno seleccionado:</h6>
                            <div class="table-responsive">
                                <table class="table table-sm table-bordered" id="tablaBloquesTurno">
                                    <thead>
                                    <tr>
                                        <th>Orden</th>
                                        <th>Hora Inicio</th>
                                        <th>Hora Fin</th>
                                        <th>Duración</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!-- Se llenará con JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>